Fault detection analysis using data mining techniques for a cluster of smart office buildings

Abstract

There is an increasing need for automated fault detection tools in buildings. The total energy request in buildings can be significantly reduced by detecting abnormal consumption effectively. Numerous models are used to tackle this problem but either they are very complex and mostly applicable to components level, or they cannot be adopted for different buildings and equipment. In this study a simplified approach to automatically detect anomalies in building energy consumption based on actual recorded data of active electrical power for lighting and total active electrical power of a cluster of eight buildings is presented. The proposed methodology uses statistical pattern recognition techniques and artificial neural ensembling networks coupled with outliers detection methods for fault detection. The results show the usefulness of this data analysis approach in automatic fault detection by reducing the number of false anomalies. The method allows to identify patterns of faults occurring in a cluster of bindings; in this way the energy consumption can be further optimized also through the building management staff by informing occupants of their energy usage and educating them to be proactive in their energy consumption. Finally, in the context of smart buildings, the common detected outliers in the cluster of buildings demonstrate that the management of a smart district can be operated with the whole buildings cluster approach.

Keywords
Smart building
ANN
Pattern recognition
Fault detection

1. Introduction and background knowledge

Buildings are becoming more and more complex energy systems consisting of several elements i.e. heating/cooling systems, ventilation systems, lighting and control systems etc. In addition, buildings have multifarious activities and the occupants may have different demands from a building. Even though building ramification is growing, communication between the participants and the building elements during the building life is poor (Djuric & Novakovic, 2009). The building energy system and the monitoring of its energy and environmental performance has been the subject of great interest in recent years. There is an increasing awareness that many buildings do not perform as intended by their designers. Typical buildings consume 20% more energy than necessary due to faults occurring at a different level of the building life cycle i.e. from construction to operations (Song, Liu, Claridge, & Haves, 2003; Wu & Sun, 2011). The building energy management system (BEMS) collects and stores massive quantities of energy consumption data. The goal of BEMS (control of energy uses and costs, while maintaining indoor environmental conditions to meet comfort and functional need) cannot be achieved without uncovering valuable information from the tremendous amounts of available data and transform it into organized knowledge (Djuric & Novakovic, 2009). Hence significant potential exists for better use of BEMS data through fault detection analysis in order to improve operations and save energy.

Fault detection is the determination that the operation of a building is incorrect or unacceptable from the expected behavior (Haves, 1999). Research on fault detection and isolation in automated processes has been active over several decades. A number of methodologies and procedures for optimizing real-time performance, automated fault detection and fault isolation were developed in the IEA ECBCS Annex 25 (Liddament, 1999). Many of these diagnosis methods are later demonstrated in real buildings in the IEA ECBCS Annex 34 (Jagpal, 2006), which focused on computer-aided fault detection and diagnosis. Annex 40 (Visier et al., 2005) encompasses commissioning process, building control system, component level models, simulation models at the building level for commissioning. The Executive Committee for the same implementing agreement published Annex 47-report 4 (Akin, 2010) on the use of flow charts and data models in the practice and research of initial commissioning of advanced and low energy building systems in order to improve their operating performance.

Many fault detection and diagnosis (FDD) tools are based on combinations of predicted building performance models and a knowledge-based system. They compare the performances of all or part of the building over a period of time to what is expected, in this way incorrect operation or unsatisfactory performances can be detected. The expected performances can be assumed, desired and model-based (Djuric & Novakovic, 2009). Early attempts at displaying energy consumption data for the energy optimization involved the use of graphs to inform the user on the trends within their building systems (Claridge, Haberl, Sparks, Lopez, & Kissock, 1992; Haberl & Abbas, 1998 I, 1998 II; Haberl, Sparks, & Culp, 1996; Prazeres & Clarke, 2003). The graphical indices can be used to analyze building energy consumption data and to check for errors, but they are usually laborious. Katipamula & Brambley (2005 part I and part II) classified the FDD methods for building energy systems and highlighted the strength and weakness of each approach. Most of the research related to FDD focused on the component-level faults (Du, Jin, & Yang, 2009; Han, Cao, Gu, & Ren, 2010; Wang & Xiao, 2004; Zhao, Wang, & Xiao, 2013), and few researchers (Yu & Van Paassen, 2003;Dodier & Kreider, 1999; Holcomb, Li, & Seshia, 2009; Li, Bowers, & Schnier, 2010) discussed the FDD strategy for whole building lighting and HVAC systems energy consumption.

The pattern recognition-based methods, which belong to the history-based methods category (Katipamula & Brambley, 2005 part I), are advantageous for fault detection since they do not require a deep understanding of physics of the concerned system(s) and can be applied to different levels. Seem (2005) proposed a pattern recognition algorithm for automatically determining the days of the week with similar energy consumption profiles. Seem (2007) also presented a method for converting the energy consumption data into information and accounted for weekly variation in energy consumption by grouping the days of week with similar power consumption. Liu, Chen, Mori, and Kida (2010) classified the building lighting power data considering the number of people and then implemented a robust statistical algorithm to detect the outliers. Fontugne et al. (2013) used the Strip, Bind and Search (SBS) method to build sensor traces in order to identify abnormal device usage in buildings.

In the recent years the application of artificial intelligence (Palade & Bocaniala, 2006; Patton, Lopez-Toribio, & Uppal, 1999) became one of the most important topics in fault detection. Chen, Wang, & van Zuylen (2010) described the density based local outlier approach and compared it with two further algorithms, the statistics-based approach and the distance-based approach, for detecting and analyzing the outliers in traffic data sets for an application to intelligent transportation systems. The experimental results reveal that this method of outlier mining is feasible and more valid then the other two methods presented to detect outliers. Cao, Si, Zhang, and Jia (2010) proposed a density-similarity-neighbor-based outlier mining algorithm for the data preprocess of data mining technique. They performed the experiments on synthetic and real datasets to evaluate the effectiveness and the performance of the proposed algorithm; the results verified that the proposed algorithm has a higher quality of outlier mining and do not increase the algorithm complexity. Chen, Miao, & Zhang (2010) introduced a neighborhood-based outlier detection algorithm that integrates rough-set-granular technique with the outlier detecting. The experimental results show that neighborhood-based metric is able to measure the local information for outlier detection. The detected accuracies based on the neighborhood outlier detection are superior to the k-nearest neighbor for mixed dataset, and a little better than recurrent neural network for discrete dataset. Alan and Catal (2011) proposed an outlier detection approach using both approaches software metrics thresholds and class labels to identify class outliers. The experiments revealed that their novel outlier detection method improved the performance of robust software fault prediction models based on Naive Bayes and Random Forests machine learning algorithms. Razavi-Far, Zio, and Palade (2014) focused on the development of a pre-processing module to generate the latent residuals for sensor fault diagnosis in a doubly fed induction generator of a wind turbine. The inputs of the pre-processing module were batches of residuals generated by a combined set of robust observers to operate point changes. The outputs of the pre-processing module were the latent residuals progressively fed into the decision module, a dynamic weighting ensemble of fault classifiers that incrementally learned the residuals–faults relationships and dynamically classified the faults including multiple new classes. The results of simulations confirmed the effectiveness of the approach, even in the incomplete scenarios due to sensor failures.

Many theoretical studies in the application research of artificial intelligence are focused on artificial neural networks (ANNs) (Haykin, 1999; Kosko, 1992) and a large number of papers on the application of ANNs for FDD have been published. Arseniev, Lyubimov, and Shkodyrev (2009) provide an approach for building the FDD system based on the ANNs and an automatic training method for such systems. The paper shows that even the usage of the simplest model of ANN such as Rosenblatt’s perceptron could provide good results and compliance with rule-based FDD system. Mavromatidis, Acha, and Shah (2013) developed a diagnostic tool for a supermarket using the ANN models. This tool evaluates, on the basis of suitable explanatory variables, the energy consumption of each supermarket subsystem to provide the energy baseline, and then performs the fault detection analysis. Shang, Zhou, and Yuan (2014) introduced an automatic fault detection method for automobile transmission and a fault diagnosis expert system for newly assembled transmission. The order spectrum analysis method was used to analyze vibratory signals of the automobile transmission. After the initial feature vectors set were obtained and improved, genetic search strategy was used to select fault features, so as to reduce the dimension of the feature vector set. Selected feature vector sets were inputted into the neural network for fault identification and classification of the newly assembled automobile transmission. A large number of data was collected and analyzed from an industrial site and the proposed algorithm was verified to be effective and exact. Rossi, Velázquez, Monedero, and Biscarri (2014) proposed an effective modeling technique for determining baseline energy consumption of a CHP plant subjected to a retrofit. The study aimed to recreate the post-retrofit energy consumption and production of the system in case it would be operating in its past configuration (before retrofit). Two different modeling methodologies were applied to the CHP plant: thermodynamic modeling and artificial neural networks. A high level of robustness was observed for neural networks against uncertainty affecting measured values of variables used as input in the models. The study demonstrated the great potential of neural networks for assessing the baseline consumption in energy intensive industry and for overcoming the limited availability of on-shelf thermodynamic software for modeling all specific typologies of existing industrial processes.

The present work is devoted to the problem of fault detection using real building energy consumption data through simplified robust algorithms. In this study, different pattern recognition techniques are used to analyze 15 min timestamp recorded data of active electrical power for lighting and total active electrical power of eight adjacent buildings (hereafter referred as cluster of buildings). As demonstrated above few papers are focused on artificial intelligence and data mining techniques applied to the specific sector of building energy consumption fault detection.

The active electrical power for lighting and total active electrical power data of the cluster of buildings and the residual obtained by the application of the ANN models are analyzed and coupled with two different outliers detection methods to identify anomalous energy consumption values. In addition, a comparison of results obtained through these methods is carried out to minimize the number of false outliers and to improve the robustness of the fault detection analysis. Experimental results show the effectiveness and usefulness of the proposed approach in automatic detection of abnormal energy consumption. The organization of the paper is as follows. Section 2 provides cluster of buildings and data information while in Section 3 a brief description of each method used in this study is presented. Section 4 describes the methodology and in Section 5 results and discussion are given. Conclusions based on results of this study constitute Section 6.
2. Buildings cluster and data description

The cluster of buildings is located within the Italian National Agency for New technologies, Energy and Sustainable Economic Development (ENEA) Casaccia research center and includes buildings F66–F67–F68–F69–F70–F71–F72–F73, positioned in two different blocks. A first block, consisting of three contiguous buildings is oriented along the axis NW–SE, while the second block consists of 5 buildings and its main orientation is NE–SW as shown in Fig. 1. The eight buildings have similar characteristics both from a structural and HVAC point of view. Moreover all the buildings are offices and hence serve the same purpose. All buildings consist of a single floor except building F67, which also includes a basement. Buildings are composed of a concrete external wall with a thickness of 30 cm, and an internal paneling of insulating material of about 5 cm. The windows are sliding with an aluminum frame. The control of solar radiation in the offices is obtained through external venetian blinds.
Buildings cluster

    

Fig. 1. Buildings cluster.

All the buildings are served by a centralized heating and cooling plant located in a technical room in which the carrier fluids are produced. At the building level is located a technician room in which the heating/cooling sub system and the air handling unit are placed. At the level of the individual building the electrical panel includes a counter-general of the total electricity supplied to the building, plus a breakdown of artificial lighting, plug load and overall conditioning system electrical lines.

Each building is equipped with an advanced monitoring system aimed at collecting energy consumption (electrical and thermal) and the environmental conditions. Active electrical power for lighting and total active electrical power consumption of each building with 15 min timestamp is analyzed in this experimentation. Furthermore number of occupants, global solar radiation, average indoor and outdoor temperatures, time, date and day of the week (Sun–Sat = 1–7), are recorded and considered as independent variables.

The monitoring and actuation system developed is structured in five logical layers: field bus layer directly interface to sensor network through a BEMS, sensor and actuator layer containing applications that interface database of data warehouse layer with BEMS, application layer containing diagnostics and control logics applications, presentation layer that is a web interface to users.
3. Proposed methods

One of the effective ways of analyzing large data is to identify recurring patterns in the raw data. Clustering and classification are two common techniques used for finding hidden patterns in data sets. Discovering the patterns in data before applying the outliers detection algorithm is very useful to find anomalies in the building energy consumption. Outliers are cases that have data values very different from the data values for the majority of cases in the data set. Statistical-based (Yamanishi & Takeuchi, 2001), distance-based (Ramaswamy, Rastogi, & Shim, 2000), deviation-based (Arning, Agrawal, & Raghavan, 1996) and density-based (Ester, Kriegel, Sander, & Xu, 1996) outliers detection methods are mainly discussed in recent times.

In this section, pattern recognition techniques and outliers detection methods employed in this study for fault detection are briefly explained. First, a classification and clustering of 15 min timestamp recorded data using CART (classification and regression tree), KMeans and DBSCAN (Density-Based Spatial Clustering of Applications with Noise) algorithms are respectively carried out. With CART and K-Means methods, the detection of evident outliers in each class and cluster respectively is performed using generalized extreme studentized deviate (GESD) algorithm. In the DBSCAN method the outliers are directly detected analyzing a particular cluster (cluster-0), in which they are isolated. Second, the ANN Ensembling (ANNE) approaches are introduced and their capability for energy fault detection is demonstrated. The fault detection is performed analyzing the magnitude of the residual generated by ANNE using an algorithm capable to detect peaks in a data set (Palshikar, 2009) and the GESD method. Finally, the results obtained by each method are compared to improve the fault detection analysis.
3.1. Classification and regression tree (CART)

The classification and regression tree (CART) algorithm is based on classification and regression trees. A CART is a binary decision tree that is constructed by splitting a parent node into two child nodes repeatedly, beginning with the root node that contains the whole learning sample. The CART method can easily handle both numerical and categorical variables and useful in robust detection of outliers. The proposed method is aimed at the identification of decision trees from which it is possible to identify rules based on the values assumed by the independent variables for the classification of data and the subsequent and effective identification of anomalies. Therefore it is particularly suitable for conducting analysis of fault detection in real time. CART methodology generally consists of three parts: construction of maximum tree, choice of the right size tree, classification of new data. The detailed approach is described in “classification and regression trees (CART) Theory and Applications” (Timofeev, 2004).
3.2. Clustering

Clustering is concerned with grouping together objects that are similar to each other and dissimilar to the objects belonging to other clusters. It is useful for extracting information from unlabeled data. The selected algorithms can be classified into two categories: (i) partitioning methods and (ii) density-based methods. These methods require the definition of a metric to compute distances between objects in the dataset. In this case study, distances between objects are measured by means of the Euclidean distance computed on normalized data.

K-Means is selected for this study, which belongs to partitioning methods category. It requires as input parameter k, the number of partitions in which the dataset should be divided. It represents each cluster with the mean value of the objects it aggregates, called centroid. The algorithm is based on an iterative procedure, preceded by a set-up phase, where k objects of the dataset are randomly chosen as the initial centroids. Each iteration performs two steps: in the first step, each object is assigned to the cluster whose centroid is the nearest to that object; in the second step centroids are relocated, by computing the mean of the objects within each cluster. Iterations continue until the k centroids do not change (Juang & Rabiner, 1990).

Density-Based Spatial Clustering of Applications with Noise (DBSCAN) (Ester et al., 1996) is the density-based method considered in this study. The method requires two input parameters: a real number r, and an integer number minPts, used to define a density threshold in the data space. A high density area in the data space is an n-dimensional sphere with radius r which contains at least minPts objects. DBSCAN is an iterative algorithm which iterates over the objects in the dataset, analyzing their neighborhood. If there are more than minPts objects whose distance from the considered object is less than r, then the object and its neighborhood originate a new cluster. DBSCAN is effective at finding clusters with arbitrary shape, and it is capable of identifying outliers as a low density area in the data space. The effectiveness of the algorithm is strongly affected by the setting of parameters r and minPts.
3.3. Artificial neural networks and basic ensembling method (ANN BEM)

ANNs (Arbib, 1995; Haykin, 1999) are data modeling and decision making tools which can be used to model complex relationships between inputs and outputs or to find patterns in data. ANNs are referred also as black-box or data-driven models and they are mainly used when analytical or transparent models cannot be applied. ANNs essentially contain masses of parallel, interconnecting information processing units, technically known as “neurons”, which interact with one another and can be located in multi-layers. For example, a typical structure consists of an input layer, an output layer and one or more intermediate layers, where the hidden neurons are located. The neurons can be combined in various ways to form different types of interconnecting structures: the connections between units define the network topology or architecture. The feedforward structures are mainly featured in FDD research papers. In feedforward ANN the data processing can extend over multiple (layers of) units, but no feedback connections are present, i.e. connections extending from outputs of units to inputs of units in the same layer or previous layers. These models are also known as Multi-Layer Perceptrons (MLP) (Rosenblatt, 1961), since the basic structure is the perceptron (Rosenblantt, 1957).

The term “ensemble” describes a group of learning machines working together on the same task: the goal is to obtain better performances than those which could be obtained from any of the constituent models. In the last years, several ensembling methods have been carried out (Breiman, 1999; Krogh & Vedelsby, 1995; Liu & Yao, 1999).

The non-generative ensembling method seeks to combine the outputs of the machines in the best way. In the case of ANNs, they are trained on the same data, they run together and their outputs are combined in a single one. Basic Ensemble Method (BEM) (Bishop, 1995; Perrone & Cooper, 1992) is the simplest way to combine M neural networks as an arithmetic mean of their outputs. This method can improve the global performance, although it does not takes into account that some models can be more accurate than others, and it has the advantage to be very easy to apply.
3.4. Outliers’ detection methods

An outlier is an observation (or subset of observations) which appears to be inconsistent with the remainder of that set of data. Outliers arise because of human error, instrument error, changes in behavior of systems or faults in systems. In this study GESD and peak detection methods are used to detect abnormal consumption. Both methods allow to find multiple outliers in a data set.
3.4.1. GESD many-outlier method

In order to perform the method two parameters need to be set: the probability α of incorrectly declaring one or more false outliers, and an upper limit nu of the expected number of potential outliers. On the basis of Carey et al. indications (1997) the potential number of the potential outliers was evaluated finding the largest integer that satisfies the inequality n < 0.5 (n − 1), where n is the number of observations in the data set X:{x1, x2, x3,… , xn}, and for the probability α were chosen values between 5% and 10%. The method allows detecting the outlier values in a data set through the calculation and comparison of the two following important parameters:

•

    The ith extreme studentized deviate Ri, determined from:

(1)
where xe,i, is the extreme element in set X that is furthest from the average

of elements in set X.

•

    The ith critical value λi determined from:

(2)
where tn−i−1,p is the student’s t-distribution with (n − i − 1) degrees of freedom, and the tail area probability p is determined from:
(3)

3.4.2. Peak detection method

Identifying and analyzing peaks in a given time-series is important in many applications such as building energy consumptions. In order to avoid subjectivity and to devise algorithms for the automatic detection of peaks in any given time-series, it is important to define the notion of the peak. A peak is defined as an observation that is inconsistent with the majority of the observations of a data set. Not all local peaks are true: a local peak is true if it is a reasonably large value even in the global context. The implemented method, peak detection, is based on the use of a peak function S, which associates a score (S value) with every element of the given time-series (Palshikar, 2009). The mean m′ and the standard deviation s′ of all positive values of the peak function were computed. A given point xi in the time-series is a peak if its score is positive and satisfies the condition: Scorei–m′ > h * s′, where h is a user-specified constant, typically 1 ⩽ h ⩽ 3 according to Palshikar indications (2009). Particularly, a peak function S computes the average of the maximum among the signed distances of a given point xi in a time-series X from its k left neighbors and the maximum among the signed distances from its k right neighbors. The function S is an index that allows to quantify the severity of the outliers and then provides information about the priorities for actions to be associated with each outlier. In addition to outliers detection methods, another synthetic index, modified z-score (Mzscore zm) is used to quantify how far and which direction an outlier is from the mean value of typical observations. The Mzscore zm is defined as:
(4)
where xoutlier is a raw value of an outlier,

is the mean value of non-outliers in the data set X and srobust is the standard deviation of non-outliers in the data set X.
4. Methodology

The proposed approach was applied to each building of the cluster for both winter and summer data. This section contains the application of each method described in Section 3.

For all simulations performed in this work, the values of the active electrical power for lighting and the total active electrical power of each building are considered as dependent variables. The independent variables considered are: date, day of the week, time of the day, average indoor temperature, average outdoor temperature, number of occupants and global solar radiation. The selection of the appropriate independent variables to consider was conducted on the basis of a sensitivity analysis and on the basis of the authors experience on this issue as evidenced by the authors previous studies (Khan, Capozzoli, Lauro, Corgnati, & Pizzuti, 2014; Lauro, Capozzoli, & Pizzuti, 2012). The results are obtained for both time periods (Jan–Feb and May–Jun). The choice of time periods has also allowed to assess the types of fault found in the periods in which weather conditions relating solar irradiance are different. The selected time periods, in fact, presenting different availability of natural light were used to verify potential fault associated with the behavior of the occupants in the management of artificial lighting.

The first analysis of fault detection was carried out by applying the GESD algorithm to each class identified by the CART method.

The major steps adopted for CART analysis used for fault detection are summarized below:

•

    Sensitivity analysis on monitoring data in order to identify the independent variables of greater importance on the variation of the dependent variables (active electrical power for lighting/total active electrical power).
•

    Classification of data using the CART method and applying pruning methods (cross validation and number of samples in both parent and child nodes).
•

    Application of GESD many outliers detection algorithm to each class.
•

    Use of dimensionless statistical indicator (Mzscore) to show the degree of importance or severity of each outlier identified in each class.

With regard to the analysis of clustering (KMeans and DBSCAN), in order to overcome the limitations of the algorithms that do not allow to consider time and day as independent variables, data sets are divided into the working period (from 07:30 to 17:30), the non-working period and the weekends. The approach adopted for the splitting of the data is the experience gained from previous work by the authors (Khan, Capozzoli, Corgnati, & Cerquitelli, 2013) for which the partition of the data set in the daytime, nighttime and weekend proved not to be particularly effective for the nature of the fault in the type of buildings under investigation. It did not allow to evaluate the effectiveness of the outliers occurring in the early hours of the morning and at the end of the working hours.

Before performing the clustering analysis, the recorded real data was normalized by means of the standard score (z-score) method. The analysis of fault detection was carried out by applying the GESD algorithm to each cluster found by K-Means. With DBSCAN method, in all discovered clusters, the cluster label zero contains all points identified as outliers or noise. To set the input parameters (r, minPts) different tests were carried out for all data (active electrical power for lighting and total active electrical power) by changing the values of these parameters.

The results show that by keeping the value of one parameter constant and changing the value of other parameter the discovered clusters are different. For example if the value of minPts is kept constant and the value of radius ‘r’ decreases then the number of clusters and outliers increases.

The results obtained from these tests were analyzed and the similarities within the clusters were investigated in order to select the appropriate values of both input parameters. The results show that DBSCAN is able to identify clusters with the same density and with very similar data. In any process, it was noted that if the value minPts is kept constant and the value Eps grows then the number of outliers tends to decrease as the number of clusters can be identified. In addition, by setting the values minPts > 3 the process is stable and the number of the formed clusters is always equal to two, that is why it was not considered necessary to proceed with further sensitivity analysis on the parameters of clusterization.

Regarding the second part of the experimentation, the ANN ensemble was built according to BEM and combining 10 ANN models. The considered ANN features are:

•

    Feed-forward MLP.
•

    1 hidden layer consisting of 15 neurons.
•

    Hyperbolic tangent as activation function for the hidden neurons.
•

    Linear activation function for the output neurons.

For the ANN modeling, a single 15-min consumption constitutes an output record as well as each single 15-min independent variable constitutes an input record. Two different ANN BEM were built, trained and tested for each building of the cluster, according to the two different time periods considered (Jan–Feb and May–Jun) and to the availability of monitored data. Considering a timestamp of 15 min and a 2-months period, the dataset related to each ANN BEM consists of about 5000 data records, of which 60% for the training data set, 10% for the validating data set and 30% for the testing data set. Many experiments were carried out with different number of hidden layers and neurons: finally, the selected ANN architecture was the one with the lower errors (according to the mean absolute error and the maximum absolute error).Training was performed with MATLAB through the Levenberg–Marquardt algorithm stopping after 1000 iterations. The residuals were calculated by the difference between the real consumption and the consumption estimated by the ANN BEMs in the testing period for the fault detection analysis of each building.
5. Results and discussion

The results obtained from the analysis of fault detection conducted separately for each building, for the two dependent variables, and for the two time periods are summarized and presented in this section.
5.1. CART and clustering

With CART analysis, it was found that for all buildings, considering both the dependent variables active electrical power for lighting and the total active electrical power, the most influential variables are the number of occupants and the solar irradiance. During the summer, the independent variable outdoor temperature is particularly important too for the classification process. Furthermore, the number of classes identified for each examined case are between 5 and 10. In the Figs. 2–5 the sequence graphs of both active electrical power for lighting and total active electrical power consumption and Mzscore graphs for the selected classes with outliers are shown. It is clear that the outliers in individual class are mostly peak values and can be easily located, while in sequence data the same is not possible. Each outlier identified by the GESD method is labeled with the time of the day, the day of the week and the date. It was verified that for all the simulations performed the index Mzscore assumed extreme absolute values proving to be an excellent diagnostic marker for the analysis of fault detection. Moreover, for each building examined (relative to the total electrical active power for lighting) and for the selected classes with the method CART, in the Figs. 2 and 3 outliers identified that are common to both clustering methods applied are also highlighted. This type of analysis is particularly important because it allowed to verify the correctness of the data classification based on the outliers identified in the selected class and also identified through the clustering methods, K-Means and DBSCAN.
Segment of active electrical power for lighting sequence and Mzscores of a…

    

Fig. 2. Segment of active electrical power for lighting sequence and Mzscores of a class data (CART) with evidence of major outliers identified with GESD (Building F66-winter data).
Segment of active electrical power for lighting sequence and Mzscores of a…

    

Fig. 3. Segment of active electrical power for lighting sequence and Mzscores of a class data (CART) with evidence of major outliers identified with GESD (Building F69-summer data).
Segment of total active electrical power sequence and Mzscores of a class data…

    

Fig. 4. Segment of total active electrical power sequence and Mzscores of a class data (CART) with evidence of major outliers identified with GESD (Building F66-winter data).
Segment of total active electrical power sequence and Mzscores of a class data…

    

Fig. 5. Segment of total active electrical power sequence and Mzscores of a class data (CART) with evidence of major outliers identified with GESD (Building F70-summer data).

The following tables (Tables 1 and 2) show in detail the outliers identified by the methods K-Means and DBSCAN; the common outliers are highlighted for both active electrical power for lighting and total active electrical power considering different periods of the day. It was observed that for buildings F69 and F72 (Jan–Feb) the outliers are common only for the active electrical power for lighting while for buildings F68, F71, F72 and F73 (May–Jun) outliers are common for both active electrical power for lighting and total active electrical power.

Table 1. Outliers detected with KMeans (GESD) and DBSCAN methods for total electrical active power and active electrical power for lighting (Building F66-winter data).
Date	Id day	Time	Electric active power for lighting F66 [W]	Total electric active power F66 [W]	Indoor temperature F66 [°C]	People presence F66	Outdoor temperature [°C]	Global solar radiation [W/m2]	Color legend
05/12/2012	4	07:30:00	2430.00	6311.39	16.15	1	6.2	141	
06/12/2012	5	06:45:00	300.00	2535.39	18.69	0	4.6	339	DBSCAN-lighting power
06/12/2012	5	07:00:00	175.00	1958.19	18.83	0	5.2	381	DBSCAN-total power
06/12/2012	5	07:15:00	135.00	2001.40	18.9	1	5.6	292	Common-DBSCAN&K-means
06/12/2012	5	07:30:00	450.00	2616.60	18.95	1	5.8	360	
07/12/2012	6	07:30:00	2615.00	5211.00	16.35	1	3.7	107	
13/12/2012	5	07:15:00	2515.00	4729.20	17.69	0	4.9	311	
13/12/2012	5	07:30:00	4855.20	7655.79	16.47	0	5.2	369	
14/12/2012	6	07:30:00	920.00	3181.10	19.51	1	9.7	512	
17/12/2012	2	07:15:00	585.00	2807.89	18.83	1	12.7	67	
17/12/2012	2	07:30:00	970.00	3406.19	19.02	1	13.1	466	
20/12/2012	5	07:30:00	845.00	3322.19	16.99	1	8	248	
08/01/2013	3	07:00:00	1470.00	3450.00	16	0	10	185	
08/01/2013	3	07:15:00	2640.00	4722.70	15.76	1	9.9	100	
08/01/2013	3	07:30:00	3065.00	5405.79	15.69	1	9.8	111	
16/01/2013	4	07:30:00	3510.00	6110.60	16.6	2	3.7	0	
24/01/2013	5	07:30:00	2655.00	6253.29	16.02	2	5.5	0	
30/01/2013	4	07:30:00	3590.00	6100.20	16.26	2	5.2	7	
07/02/2013	5	07:30:00	2885.00	5980.00	18.93	0	3.7	0	
11/02/2013	2	07:30:00	4445.20	6852.39	15.09	0	3.2	0	
13/02/2013	4	07:30:00	3185.00	7012.70	16.72	3	3.8	11	

Table 2. Outliers detected with KMeans (GESD) and DBSCAN methods for total electrical active power and active electrical power for lighting (Building F68-summer data).

Further conducted analysis and reported in the Tables 3 and 4 relate to the identification of the outliers observed for the total active electrical power which are common to all three methods of data mining techniques. From the tables it is observed that most common outliers are identified in the early morning. In general outliers were identified in three different periods of the day. The first period is early morning between 06:30 and 07:30. In the early morning both electrical power for lighting and total electrical power have the peaks at a very low presence of occupants. The second period in which many outliers were identified is between 12:30 and 13:30 during the lunch break. The third period is related to the end of working hours between 17:00 and 17:30, where it is observed that a decrease in the number of occupants of the building does not correspond to a decrease in power consumption for lighting and total power (which takes into account the plug load and air conditioning).

Table 3. Common outliers identified with CART (GESD), KMeans (GESD), and DBSCAN for total electrical active power (Building F72-winter data).
Date	Id day	Time	Total electric active power F72 [W]	Indoor temperature F72 [°C]	People presence F72	Outdoor temperature [°C]	Global solar radiation [W/m2]
02/12/2012	1	07:45:00	2517	22.75	0	8.8	0
02/12/2012	1	20:00:00	2588.5	21.9	0	6.2	0
14/12/2012	6	06:30:00	5514.5	18.94	0	8.5	91
14/12/2012	6	06:45:00	4492.1	18.3	0	8.6	103
17/12/2012	2	07:30:00	4815.6	19.67	1	13.1	466
14/01/2013	2	07:30:00	4498.2	19.4	0	9	0
19/01/2013	7	02:30:00	2529.89	20.09	0	0.4	0
19/01/2013	7	02:45:00	2403.5	20.06	0	0.2	0
19/01/2013	7	08:15:00	2606.89	19.83	0	2.6	12
19/01/2013	7	14:45:00	2699.1	21.31	0	4.5	51
20/01/2013	1	03:15:00	2628.19	20.04	0	9.2	0
22/01/2013	3	07:15:00	4694.2	18.76	0	4	0
05/02/2013	3	07:15:00	6533.6	19.19	0	5.9	0
05/02/2013	3	07:30:00	6010.5	19.03	0	5.9	0
07/02/2013	5	07:30:00	4765.6	20.93	1	3.7	0
13/02/2013	4	07:30:00	4558	21.64	1	3.8	11

Table 4. Common outliers identified with CART (GESD), KMeans (GESD), and DBSCAN for total electrical active power (Building F71-summer data).
Date	Id day	Time	Total electric active power F71 [W]	Indoor temperature F71 [°C]	People presence F71	Outdoor temperature [°C]	Global solar radiation [W/m2]
14/05/2013	3	07:30:00	3169	18.87	2	12.4	26
23/05/2013	5	06:45:00	4066.6	21.79	0	13.1	23
23/05/2013	5	07:00:00	4238.7	21.15	0	13.2	32
31/05/2013	6	06:45:00	3205.3	20.42	0	9	26
31/05/2013	6	07:00:00	4292	20.59	0	9.3	51
31/05/2013	6	07:15:00	4433.1	20.23	0	9.8	74
31/05/2013	6	07:30:00	4124.5	19.5	2	10.4	127
11/06/2013	3	07:15:00	3361.19	23.35	1	16.1	33
13/06/2013	4	07:15:00	3561.69	23.89	0	19.4	42
21/06/2013	6	07:30:00	3633.19	24.45	1	20.4	60
21/06/2013	6	15:15:00	918.4	25.64	6	29.3	747
27/06/2013	5	07:30:00	3271.8	20.01	2	17.1	35
5.2. ANN BEM

The fault detection analysis conducted on the basis of the residuals obtained by the ANN BEMs consumptions modeling is described in this section. For the sake of simplicity, in the following section only the results for the building F68 in summer season (May 2013–Jun 2013) are shown.

A residual analysis on lighting active electrical power and total active electrical power was performed and for both cases the testing residuals with a timestamp of fifteen minutes are shown in Fig. 6(a) and (b) respectively. Then, the peak detection and the GESD methods were applied to active electrical power for lighting residuals: the detected faults are reported in Table 5. The testing period for building F68 is from 10/06/2013 to 20/06/2013.
Testing residuals of building F68 – (a) active electrical power for lighting…

    

Fig. 6. Testing residuals of building F68 – (a) active electrical power for lighting (b) total active electrical power.

Table 5. Residual analysis and fault detection with ANN BEM for building F68.
Date	Time	Power residual value [W]	S function value	Mzscore
Peak detection method
10/06/2013	06:45	3088.68	2911.39	5.82
10/06/2013	07:00	3539.88	3362.59	6.85
12/06/2013	06:30	1670.47	1591.85	2.61
12/06/2013	20:00	1296.86	943.99	1.76
18/06/2013	06:45	1948.57	1648.96	3.24
21/06/2013	07:00	1414.58	936.35	2.03

Date	Time	Power residual value [W]	Mzscore	
GESD method
10/06/2013	06:45	3088.68	5.76	
10/06/2013	07:00	3539.88	6.77	

The identified residual peaks include potential early morning faults for which very high power demand is observed with few people in the buildings (see Table 5). These situations correspond to “systematic” anomalies: the high consumption in the early morning is due to the cleaning staff that is not part of presence data. Table 5 shows also that the peak detection method performs better than the GESD method since it is able to detect a greater number of “not false positives” faults: it should be noticed that this conclusion is not general but it is specific to this particular type of fault detection application and strongly dependent on the dataset used. In Fig. 7 an example of fault detected by the peak detection method and not by the GESD method applied to building F68 residuals is shown: this situation correspond to a “real” anomaly because the lighting power consumption is high (1.28 kW) with respect to the time of the day and only one presence in the building.
Example of fault detection through residual analysis of building F68

    

Fig. 7. Example of fault detection through residual analysis of building F68.

The results confirm that the analysis of residuals generated through the ANN BEM and the application of the peak detection method represents a useful and powerful technique for the peak building lighting fault detection.

The peak detection method is also directly applied to the sequences lighting active power demand data. In Fig. 8 is shown an example of outlier (5.17 kW) detected in the early morning for building F68 with the values of Mzscore and S function indices.
Example of fault detection through peak detection method application to…

    

Fig. 8. Example of fault detection through peak detection method application to consumption data of building F68.

However the data analysis showed that lighting power consumption is related to several variables i.e. people, solar radiation, day and time, so it can be inferred that in this specific application the extreme values are not always definite faults. Therefore some false positives can be found when a “univaried” outlier detection method is applied without taking into account the effect of the independent variables. For this reason, an FDD process performed through a residual ANN BEM analysis is always recommended to avoid the occurrence of false positive faults.
5.3. Identification of common outliers

Following the various comparative analyses of the results obtained using the statistical pattern recognition techniques and the residuals analysis described in Section 3, this section summarizes the anomalies identified through all proposed methods for some selected buildings belonging to cluster of buildings in the period May–Jun. The objective of this analysis is to improve the fault detection by minimizing the false anomalies and to identify the type of faults. Fig. 9 shows the Mzscores graph of a class (CART) with evidence of common outliers detected by CART and K-Means with GESD, DBSCAN, and peak detection method applied to ANN BEM residuals. In Fig. 10 the Mzscores of a class (CART) with evidence of common major outliers identified by ANN BEM residuals (GESD) and CART (GESD) are shown.
Mzscores of a class (CART) with evidence of common major outliers detected by…

    

Fig. 9. Mzscores of a class (CART) with evidence of common major outliers detected by CART and KMeans with GESD, DBSCAN and peak detection method (Building F66).
Mzscores of a class (CART) with evidence of common major outliers identified by…

    

Fig. 10. Mzscores of a class (CART) with evidence of common major outliers identified by NN residuals (GESD) and CART (GESD) (Building F68).

These figures confirm that most real abnormal consumption occurs during the early morning period. Furthermore, the outliers detected by the application of all proposed methods among the buildings are analyzed. It was observed that in all buildings the abnormal values detected, are mainly of an identical nature. Most outliers are present during the same time periods, and with a fewer number of people presence (see Table 6). Fig. 11 shows the active electrical power for lighting and the total active electrical power consumption against the number of people presence (9 and more) for buildings cluster (winter data and summer data). The energy consumption of outliers shown in Table 6 is as high as peak operating hours and equals to the consumption of high number of people presence. Usually off-peak electric use in many buildings is 30–70% of peak use. From these results it can be concluded that outliers identified by all methods more likely correspond to values of real abnormal consumption, hence minimizing the number of false positives.

Table 6. Some common outliers detected by all methods among the buildings cluster.
Date	Id day	Time	Electric active power for lighting [W]	Total electric active power [W]	People presence	Outdoor temperature [°C]	Global solar radiation [W/m2]
16/05/2013	5	07:30:00	4200	5950.29	1	13.4	39
16/05/2013	5	07:45:00	4695.2	7493.1	3	13.9	44
22/05/2013	4	07:30:00	4165.2	7422.79	2	13.9	65
22/05/2013	4	07:45:00	4615.2	6718.2	2	14	97
31/05/2013	6	07:30:00	1690	4124.5	2	10.4	127
11/06/2013	3	07:15:00	1145	3361.19	1	16.1	33
21/06/2013	6	07:30:00	750	3633.19	1	20.4	60
27/06/2013	5	07:30:00	815	3271.8	2	17.1	35
28/06/2013	6	07:45:00	645	4215.39	1	17	74
29/05/2013	4	07:30:00	1885	6035.79	1	14.1	76
Scatter plots showing active electrical power for lighting and total active…

    

Fig. 11. Scatter plots showing active electrical power for lighting and total active electrical power vs number of people.

Through the proposed approach, this abnormal consumption is avoidable resulting a significant amount of saved energy. Thus, once the ANN models are trained and the pattern recognition models are defined, all the simulations can be performed in minute order time. The proposed methodology allows to perform a fault detection analysis in “near” real time and can be easily implemented in building energy management systems. The study carried out is relevant in the context of smart buildings. In particular, the common detected outliers in the buildings cluster demonstrate that the management of a smart district can be operated with the whole buildings cluster approach. Moreover, it should be recognized that, the whole building data modeling approach is useful for indications of probable cause and additional field measurements are required to confirm the probable cause of anomalous consumption.
6. Conclusions

The research was aimed at testing the potential of using data mining techniques and ANN BEM in combination with outliers detection for an automated fault detection process. The application of the proposed approach can improve fault detection process in building application by reducing the number of false anomalies.

The methods proposed and implemented have proven adequate for detection purposes with different potentials and limitations. In particular the neural ensemble method has always proven to be more robust than the single neural model. The analysis of residuals (ANN BEM) coupled with the peak detection method has also allowed to identify outliers in relation to the boundary conditions of the buildings (occupants, indoor/outdoor temperatures, solar radiation, time and day). As a consequence the method is able to detect the outliers that much more likely reflect real abnormal consumption compared to outlier identified by statistical methods simply applied only to actual consumption data (univariate analysis). Since the ANNs training set is characterized by a “fault free” hypothesis, the ANNs testing output allow the estimation of the normal consumption related to the input conditions and an high value of testing residuals represents rightly an anomalous consumption.

The CART method algorithm coupled with GESD outliers detection algorithm is particularly robust and accurate in finding the outliers of active electrical power for lighting and total active electrical power. The method allows to determine more correctly if the energy consumption is significantly different from previous consumption with the similar boundary conditions.

In the experimental results using K-Means approach some of the identified clusters are impure and outliers are often scattered and difficult to identify (the abnormal energy consumption values are disseminated). The DBSCAN method proved to be particularly suitable for grouping data into clusters characterized by the same density and with similar values. In addition, the method is effective in bringing together all the outliers in a one cluster (cluster-0).

In general, it was found that for clustering analysis a suitable splitting of data allows to overcome the inherent limitation of the algorithms (the time cannot be considered as input variable in this algorithm).

Since weather conditions change considerably on the basis of the period of the year and strongly influence electrical energy consumptions, all the described models have to be suitably built and trained for each season taking in account the different building operation conditions.

Since the residual analysis and the data mining techniques proposed in this paper are able to detect consecutive anomalous values, in future the methodology here proposed can be effectively applied also for the detection of anomalous trends, and not only of peaks, of building consumptions. Furthermore future works will consider the fault detection of other building energy end-uses i.e. HVAC electrical and thermal consumptions, and exploit the artificial intelligence techniques for the fault diagnosis phase.

The study will help building energy management systems (BEMS) by tracking and detecting abnormal energy consumption in building overall energy system. The methodology can be easily integrated with the building energy management system to perform fault detection in “near” real time and can be applied to the buildings with similar end-uses. The developed methodology will be implemented in the informatics infrastructure in ENEA Casaccia to supervise the building electrical energy consumption of the cluster of buildings.